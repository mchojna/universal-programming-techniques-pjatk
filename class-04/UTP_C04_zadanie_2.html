<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1250"><title>S_MAYBE</title></head>
<body><span style="font-weight: bold;">Zadanie: klasa Maybe</span><br><br>Zdefiniowaæ klasê Maybe o nastêpuj¹cych w³aœciwoœciach.<br><br>Obiekty
Maybe reprezentuj¹&nbsp;kontenery, które mog¹ zawieraæ lub nie
pojedyncz¹ wartoœæ. Motywacj¹ do wprowadzenia takiej konstrukcji jest
u³atwienie programowania w sytuacji, gdy zmienna mo¿e mieæ wartoœæ
null, szczególnie kiedy wymagane jest jej dalsze bezpieczne
przetwarzanie (na przyk³ad za pomoc¹ lambda-wyra¿eñ, oznaczaj¹cych
jakieœ funkcje). Bezpieczne - to znaczy takie, które nie powoduje
wyj¹tku NullPointerException.<br><br>Obiekty typu Maybe zawieraj¹ jak¹œ wartoœæ lub s¹ puste (nigdy nie powinny mieæ wartoœci null). <br>W klasie Maybe zdefiniowaæ nastêpuj¹ce metody:<br><ul><li><span style="font-weight: bold;">Maybe.of(x) </span>- ta metoda statyczna zwraca obiekt Maybe, „opakowuj¹cy” wartoœæ x, dowolnego typu referencyjnego. </li><li><span style="font-weight: bold;">void ifPresent(Consumer cons)</span>&nbsp;
- je¿eli w obiekcie Maybe znajduje siê wartoœæ, wykonywana jest
operacja cons z t¹ wartoœci¹ jako argumentem, w przeciwnym razie - gdy
obiekt Maybe jest pusty - nic siê nie dzieje.</li><li><span style="font-weight: bold;">Maybe map(Function func)</span>
-&nbsp; je¿eli w obiekcie&nbsp; jest wartoœæ, wykonywana jest funkcja
func z t¹ wartoœci¹ jako argumentem i zwracany jest jej wynik
„zapakowany” w nowy obiekt klasy Maybe (to opakowanie jest niezbêdne,
bo wynik móg³by byæ null, a tego chcemy unikn¹æ w ewentualnym dalszym
przetwarzaniu; jeœli wynikiem funkcji jest null, zwracany jest pusty
obiekt klasy Maybe).</li><li><span style="font-weight: bold;">T get()</span> zwraca zawartoœæ obiektu Maybe, ale jeœli jest on pusty, powinna zg³osiæ wyj¹tek NoSuchElementException.</li><li><span style="font-weight: bold;">boolean isPresent() </span>- zwraca true jeœli w obiekcie Maybe zawarta jest wartoœc, a false - gdy jest on pusty</li><li><span style="font-weight: bold;">T orElse(T defVal)</span> - zwraca zawartoœæ obiektu Maybe lub domyœln¹ wartosæ defVal, jeœli obiekt Maybe jest pusty.</li><li><span style="font-weight: bold;">Maybe filter(Predicate pred)</span>
&nbsp;- zwraca&nbsp; to Maybe, jeœli spe³niony jest warunek pred lub to
Maybe jest puste; zwraca puste Maybe, jeœli warunek pred jest
niespe³niony.</li></ul>Klasê Maybe przetestowaæ na przyk³adzie nastêpuj¹cej &nbsp;klasy&nbsp;Main::<br><br><pre>        public class Main {<br><br>          public static void test() {<br>            // Metoda of(...)<br>            String s = "aaa";    <br>            Maybe&lt;String&gt; m1 = Maybe.of(s);<br>            System.out.println(m1);<br>            s = null;<br>            Maybe&lt;String&gt; m2 = Maybe.of(s);<br>            System.out.println(m2);<br><br>            // Metoda ifPresent(...)<br>            Integer num = null;<br>            Maybe&lt;Integer&gt; m4 = Maybe.of(num);<br>            // ZAMIAST<br>            if (num != null) System.out.println(num);<br>            // PISZEMY<br>            m4.ifPresent(n -&gt; System.out.println(n));<br>            // A NAWET<br>            m4.ifPresent(System.out::println);<br><br>            Maybe&lt;Integer&gt; m5 = Maybe.of(10);<br>            m5.ifPresent(System.out::println);<br><br>            // Metoda map()<br>            Maybe&lt;Integer&gt; m6 = m5.map( n -&gt; n +10 ); <br>            System.out.println(m6);<br><br>            // Metoda get()<br>            System.out.println(m6.get());<br>            try {<br>              System.out.println(m4.get());<br>            } catch(Exception exc) {<br>              System.out.println(exc);<br>            }<br><br>            // Metoda orElse()<br>            // ZAMIAST<br>            String snum = null;<br>            if (num != null) snum = "Wartoœæ wynosi: " + num;<br>            if (snum != null) System.out.println(snum);<br>            else System.out.println("Wartoœæ niedostêpna");<br><br>            //MO¯NA NAPISAÆ<br>            String res = Maybe.of(num).map(n -&gt; "Wartoœæ wynosi: "+n)<br>                              .orElse("Wartoœæ niedostêpna");<br>            System.out.println(res);<br><br>            // I filter(...)<br><br>            String txt = "Pies";<br>            String msg = "";<br><br>            //ZAMIAST<br>            if (txt != null &amp;&amp; txt.length() &gt; 0) {<br>              msg = txt;<br>            } else {<br>              msg = "Txt is null or empty";<br>            }<br><br>            //MO¯NA NAPISAÆ<br>            msg = Maybe.of(txt)<br>                       .filter(t -&gt; t.length() &gt; 0)<br>                       .orElse("Txt is null or empty"); <br>            System.out.println(msg);<br>          }<br><br>          public static void main(String[] args) {<br>            test();<br>          }<br>        }<br>        // Wynik na konsoli:<br>        /*    <br>          Maybe has value aaa<br>          Maybe is empty<br>          10<br>          Maybe has value 20<br>          20<br>          java.util.NoSuchElementException:  maybe is empty<br>          Wartoœæ niedostêpna<br>          Wartoœæ niedostêpna<br>          Pies<br>        */</pre><br>
</body></html>